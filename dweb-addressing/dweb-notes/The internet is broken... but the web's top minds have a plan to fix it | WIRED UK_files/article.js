webpackJsonp([1],{14:function(t,e,i){"use strict";function n(){z.a.call(this),this.groups=[],this.obstacles=[],this.scrolls=[],this.stickies=[]}function s(t,e){o(t,e)||t.push(e)}function o(t,e,i){if(!e)return!1;for(var n=t.length;n--&&t[n]!==e&&t[n].el!==e;);return i?n:-1!==n}function r(t){return Object(C.f)({},L,t)}function l(t){t.recalculate(!0)}function a(t,e){var i=-1;return-1!==(i=o(t,e,!0))&&(t.splice(i,1),!0)}function c(t,e){var i=Object(C.f)({group:null},e);z.a.call(this),this.el=t,this.id=q++,this.group=i.group,this.offset={bottom:0,left:0,right:0,top:0},this.position={left:0,top:0},this.size={height:0,width:0};var n=h(this.group),s=!1;n&&(-1!==(s=P.hasGroup(n,!0))?this.group=P.groups[s]:(this.group=new H(this.group),this.group.recalculate())),s=null,n=null}function h(t){return"string"==typeof t?document.querySelector(t):t instanceof HTMLElement?t:void 0}function u(t,e){D.call(this,t,e),P.addObstacle(this)}function f(t){for(var e=t.length,i=new Array(e);e--;)i[e]=t[e];return i}function d(t,e){if(D.call(this,t,e),this.state=d.STATE_INITIAL,this._elStick=this.el.querySelector(".stick-element"),this._elWrapper=this.el,this._absoluteTop=0,!this._elStick)throw new TypeError("element does not contain a .stick-element");P.addStick(this)}function p(t){return"[object Array]"===Object.prototype.toString.call(t)}function g(t,e){for(var i in e)e.hasOwnProperty(i)&&function(e,i){t.style[i]=e}(e[i],i)}function m(t,e,i){Object(C.N)(t,e),Object(C.a)(t,i)}function b(t){for(var e=t.length,i=new Array(e);e--;)i[e]=t[e];return i}function v(t){z.a.call(this),this.children=[],this.el=t,this.position={left:0,top:0},this.scroll=null,this.size={height:0,width:0},P.addGroup(this)}function _(t,e){null!==t.group&&t.group.removeChild(t),t.group=e}function y(t){return t instanceof R}function O(t){return t instanceof M}function S(t){return t.recalculate()}function w(t,e){var i=Object(C.f)({},e);if(z.a.call(this),this.children=[],this.el=t,this.isPaused=!1,this.offset={bottom:0,left:0,right:0,top:0},this.position={left:0,top:0},this.size={height:0,width:0},this._eventHooks={},this._lastScrollY=0,void 0!==i.throttle){if("number"!=typeof i.throttle)throw new TypeError("throttle must be of type number");this._eventHooks.scroll=Object(C.R)(this.update,i.throttle,this)}else this._eventHooks.scroll=this.update.bind(this);this.el.addEventListener("scroll",this._eventHooks.scroll),P.addScroll(this)}function j(t,e){null!==t.scroll&&t.scroll.removeChild(t),t.scroll=e}function T(t){return function(e){return e.isOnScreen(t)}}function E(t,e,i){for(var n=i-1,s=e.length;++n<s;)if(e[n].group===t)return e[n];return!1}function I(t,e){return t>e?"down":t<e?"up":"neutral"}function k(t,e){var i=t.group;if(!i)return!0;for(var n=-1,s=e.length,o=-1;++n<s;)if(e[n]===t)o=n;else if(e[n].group===i&&-1!==o)return!1;return!0}function A(t){return t instanceof H}function x(t){return t instanceof R}var N=i(1),z=i.n(N),C=i(0),L={silent:!1};n.prototype=Object(C.D)(z.a.prototype,{addGroup:function(t,e){var i=r(e);s(this.groups,t),i.silent||this.emit("add",t)},addObstacle:function(t,e){var i=r(e);s(this.obstacles,t),i.silent||this.emit("add",t)},addScroll:function(t,e){var i=r(e);s(this.scrolls,t),i.silent||this.emit("add",t)},addStick:function(t,e){var i=r(e);s(this.stickies,t),i.silent||this.emit("add",t)},constructor:n,hasGroup:function(t,e){return o(this.groups,t,e)},hasObstacle:function(t,e){return o(this.obstacles,t,e)},hasScroll:function(t,e){return o(this.scrolls,t,e)},hasStick:function(t,e){return o(this.stickies,t,e)},recalculate:function(){this.groups.forEach(l),this.scrolls.forEach(l)},removeGroup:function(t,e){var i=r(e);a(this.groups,t)&&!i.silent&&this.emit("remove",t)},removeObstacle:function(t,e){var i=r(e);a(this.obstacles,t)&&!i.silent&&this.emit("remove",t)},removeScroll:function(t,e){var i=r(e);a(this.scrolls,t)&&!i.silent&&this.emit("remove",t)},removeStick:function(t,e){var i=r(e);a(this.stickies,t)&&!i.silent&&this.emit("remove",t)}});var P=new n,q=0;c.prototype=Object(C.D)(z.a.prototype,{constructor:c,destroy:function(){this.removeAllListeners(),this.el=null,this.group=null,this.offset=null,this.position=null,this.size=null},recalculate:function(){var t=Object(C.s)(this.el);this.size.height=t.height,this.size.width=t.width,this.position.left=t.left,this.position.top=t.top}});var D=c;u.prototype=Object(C.D)(D.prototype,{constructor:u,destroy:function(){P.removeObstacle(this),D.prototype.destroy.call(this)}}),u.createObstacle=function(t,e){var i=null;if(i=f("string"==typeof t?document.querySelectorAll(t):t),0===i.length)return i;for(var n=Object(C.f)({},e),s=i.length;s--;)P.hasObstacle(i[s])||(i[s]=new u(i[s],n));return i=i.filter(function(t){return t instanceof u})};var R=u;d.prototype=Object(C.D)(D.prototype,{_setAbsolute:function(t,e){this.state!==d.STATE_ABSOLUTE&&(this.state=d.STATE_ABSOLUTE,this._absoluteTop=t,m(this._elStick,"stick-element--fixed","stick-element--absolute"),m(this._elWrapper,"stick-wrapper--fixed","stick-wrapper--absolute"),g(this._elWrapper,{height:this.size.height+"px"}),g(this._elStick,{marginTop:"",position:"relative",top:this._absoluteTop-this.position.top+this.offset.top+"px"}),e||this.emit("statechange",this.state))},_setFixed:function(t){this.state!==d.STATE_FIXED&&(this.state=d.STATE_FIXED,m(this._elStick,"stick-element--absolute","stick-element--fixed"),m(this._elWrapper,"stick-wrapper--absolute","stick-wrapper--fixed"),g(this._elWrapper,{height:this.size.height+"px"}),g(this._elStick,{marginTop:-(this.position.top-this.offset.top)+"px",position:"fixed",top:""}),t||this.emit("statechange",this.state))},_setInitial:function(t){this.state!==d.STATE_INITIAL&&(this.state=d.STATE_INITIAL,Object(C.N)(this._elStick,"stick-element--absolute"),Object(C.N)(this._elStick,"stick-element--fixed"),Object(C.N)(this._elWrapper,"stick-wrapper--absolute"),Object(C.N)(this._elWrapper,"stick-wrapper--fixed"),g(this._elWrapper,{height:""}),g(this._elStick,{marginTop:"",position:"",top:""}),t||this.emit("statechange",this.state))},_setNeutral:function(t){this.state!==d.STATE_NEUTRAL&&(this.state=d.STATE_NEUTRAL,t||this.emit("statechange",this.state))},constructor:D,destroy:function(){this.state=null,this._elStick=null,this._elWrapper=null,this._absoluteTop=0,P.removeStick(this),D.prototype.destroy.call(this)},recalculate:function(){var t=this.state;switch(this._setInitial(!0),D.prototype.recalculate.call(this),t){case d.STATE_FIXED:this._setFixed(!0);break;case d.STATE_ABSOLUTE:this._setAbsolute(this._absoluteTop,!0)}},updateOffset:function(t){switch(this.offset=Object(C.f)({},this.offset,{bottom:0,left:0,right:0,top:0},t),this.state){case d.STATE_FIXED:g(this._elStick,{marginTop:-(this.position.top-this.offset.top)+"px"});break;case d.STATE_ABSOLUTE:g(this._elStick,{top:this._absoluteTop-this.position.top+this.offset.top+"px"})}}}),d.createStick=function(t,e){var i=null;if(i="string"==typeof t?b(document.querySelectorAll(t)):p(t)?t.slice(0):t instanceof HTMLElement?[t]:b(t),0===i.length)return i;for(var n=Object(C.f)({},e),s=i.length;s--;)P.hasStick(i[s])||(i[s]=new d(i[s],n));return i=i.filter(function(t){return t instanceof d})},d.getStateTitleFromIndex=function(t){switch(t){case 0:return"Initial";case 1:return"Fixed";case 2:return"Absolute";case 3:return"Neutral";default:return"Unknown"}},d.STATE_INITIAL=0,d.STATE_FIXED=1,d.STATE_ABSOLUTE=2,d.STATE_NEUTRAL=3;var M=d;v.prototype=Object(C.D)(z.a.prototype,{addChild:function(t,e){if(!O(t)&&!y(t))throw new TypeError("item must be of type Stick");if(this.hasChild(t))return!1;var i=Object(C.f)({silent:!1,sort:!0},e);_(t,this),this.children.push(t),i.silent||this.emit("add",t),i.sort&&this.sortChildren()},addChildren:function(t,e){var i=Object(C.f)({silent:!1,sort:!0},e),n=i.sort;i.sort=!1;for(var s=-1,o=t.length;++s<o;)this.addChild(t[s],i);n&&this.sortChildren()},constructor:v,destroy:function(){this.el=null,this.children.length=0,this.children=null,this.removeAllListeners(),P.removeGroup(this)},hasChild:function(t,e){if(!t)return!1;if(!O(t)&&!y(t))return!1;var i=this.children.indexOf(t);return e?i:-1!==i},insertChild:function(t,e,i){if(e<0||e>this.children.length-1)return!1;if(!O(t)&&!y(t))throw new TypeError("item must be of type Stick");if(this.hasChild(t))return!1;var n=Object(C.f)({silent:!1,sort:!0},i);_(t,this),this.children.splice(e,0,t),n.silent||this.emit("insert",t,e),n.sort&&this.sortChildren()},isOnScreen:function(t){return!(t.top>this.position.top+this.size.height)&&!(t.bottom<this.position.top)},recalculate:function(t){var e=Object(C.s)(this.el);this.size.height=e.height,this.size.width=e.width,this.position.left=e.left,this.position.top=e.top,t&&this.children.forEach(S)},removeChild:function(t,e){var i=-1;if(-1===(i=this.hasChild(t,!0)))return!1;var n=Object(C.f)({silent:!1},e);return t.group=null,this.children.splice(i,1),n.silent||this.emit("remove",t),!0},sortChildren:function(){this.children.length>1&&this.children.sort(function(t,e){return t.position.top-e.position.top}),this.emit("sort",this.children)}});var H=v;w.prototype=Object(C.D)(z.a.prototype,{_updateDown:function(t,e){for(var i=t.children,n=-1,s=i.length,o=null,r=null,l=0,a=0;++n<s;)if(o=i[n],!x(o))if(r=E(o.group,i,n+1),o.state!==M.STATE_NEUTRAL)o.state===M.STATE_INITIAL&&o.position.top-o.offset.top<=e?o._setFixed():o.state===M.STATE_FIXED&&r?(l=r.position.top-r.offset.top,a=o.size.height+o.offset.top+o.offset.bottom,l<=e+a&&o._setAbsolute(l-a)):o.state===M.STATE_FIXED&&o.group&&(a=o.size.height+o.offset.top+o.offset.bottom,o.group.position.top+o.group.size.height<=e+a)&&o._setAbsolute(o.group.position.top+o.group.size.height-a);else{if(r&&(l=r.position.top-r.offset.top,a=o.size.height+o.offset.top+o.offset.bottom,l<=e+a)){o._setAbsolute(l-a);continue}if(o.group&&(a=o.size.height+o.offset.top+o.offset.bottom,o.group.position.top+o.group.size.height<=e+a)){o._setAbsolute(o.group.position.top+o.group.size.height-a);continue}if(o.position.top-o.offset.top<=e){o._setFixed();continue}o._setInitial()}},_updateNeutral:function(t,e){t.children.forEach(function(t){t._setNeutral&&t._setNeutral()}),this._updateDown(t,e)},_updateUp:function(t,e){for(var i=t.children,n=i.length,s=null,o=null,r=0,l=0;n--;)if(s=i[n],!x(s))if(s.state===M.STATE_FIXED&&s.position.top-s.offset.top>e)s._setInitial();else{if(s.state===M.STATE_ABSOLUTE){if(s.position.top-s.offset.top>e){s._setInitial();continue}o=E(s.group,i,n+1),o&&(o.state===M.STATE_INITIAL||x(o))&&(r=o.position.top-o.offset.top,l=s.size.height+s.offset.top+s.offset.bottom,r>e+l&&s._setFixed())}s.state===M.STATE_ABSOLUTE&&s.group&&k(s,i)&&(l=s.size.height+s.offset.top+s.offset.bottom,s.group.position.top+s.group.size.height>e+l)&&s._setFixed()}},addChild:function(t,e){if(!A(t))throw new TypeError("item must be of type Group");if(this.hasChild(t))return!1;var i=Object(C.f)({silent:!1,sort:!0},e);j(t,this),this.children.push(t),i.silent||this.emit("add",t),i.sort&&this.sortChildren()},addChildren:function(t,e){var i=Object(C.f)({silent:!1,sort:!0},e),n=i.sort;i.sort=!1;for(var s=-1,o=t.length;++s<o;)this.addChild(t[s],i);n&&this.sortChildren()},constructor:w,hasChild:function(t,e){if(!t)return!1;if(!A(t))return!1;var i=this.children.indexOf(t);return e?i:-1!==i},insertChild:function(t,e,i){if(e<0||e>this.children.length-1)return!1;if(!A(t))throw new TypeError("item must be of type Group");if(this.hasChild(t))return!1;var n=Object(C.f)({silent:!1,sort:!0},i);j(t,this),this.children.splice(e,0,t),n.silent||this.emit("insert",t,e),n.sort&&this.sortChildren()},pause:function(){this.isPaused||(this.isPaused=!0,this.silent||this.emit("pause"))},recalculate:function(t){var e=Object(C.s)(this.el);this.size.height=e.height,this.size.width=e.width,this.position.left=e.left,this.position.top=e.top,t&&this.children.forEach(function(e){e.recalculate(t)})},removeChild:function(t,e){var i=-1;if(-1===(i=this.hasChild(t,!0)))return!1;var n=Object(C.f)({silent:!1},e);t.scroll=null,this.children.splice(i,1),n.silent||this.emit("remove",t)},resume:function(){this.isPaused&&(this.isPaused=!1,this.silent||this.emit("resume"))},sortChildren:function(t){this.children.length>1&&this.children.sort(function(t,e){return t.position.top-e.position.top}),t&&this.children.forEach(function(t){t.sortChildren(!0)}),this.emit("sort",this.children)},update:function(){if(!this.isPaused){var t=this._lastScrollY,e=Object(C.z)(this.el),i=I(e,t);this._lastScrollY=e;var n=null;n="down"===i?this._updateDown.bind(this):"up"===i?this._updateUp.bind(this):this._updateNeutral.bind(this);var s={bottom:e+this.size.height,top:e},o=this.children.filter(T(s));0===o.length&&(o=this.children),o.forEach(function(t){n(t,e)}),this.emit("update",e,t,i)}}});var B=w;i.d(e,"a",function(){return H}),i.d(e,"b",function(){return P}),i.d(e,"c",function(){return R}),i.d(e,"d",function(){return B}),i.d(e,"e",function(){return M})},18:function(t,e,i){"use strict";function n(){R&&s();var t=document.querySelector("meta[name=viewport]");R=t.getAttribute("content"),t.setAttribute("content","user-scalable=no, width=device-width, initial-scale=1, maximum-scale=1")}function s(){document.querySelector("meta[name=viewport]").setAttribute("content",R),R=null}function o(t){return!!t.querySelector("."+q)}function r(t){return!!t.querySelector("."+D)}function l(t){var e=t.querySelector("."+q);if(!e)return null;try{return JSON.parse(e.textContent)}catch(t){return console.warn("Magnifier config malformed"),null}}function a(t,e,i,n,s){return n+(t-e)/(i-e)*(s-n)}function c(t){return new Promise(function(e,i){var n=new Image;n.onload=function(){this.onload=null,this.onerror=null,e(t)},n.onerror=function(){this.onload=null,this.onerror=null,i(t)},n.src=t})}function h(t,e){return Object(x.k)("close",t,e)}function u(t,e){return Object(x.k)("open",t,e)}function f(t,e){return Object(x.k)("resize",t,e)}function d(t,e){H.a.call(this);var i=e||{};this._containerPosition=null,this._hooks={},this._magnifierConfig=l(t),this._magnifierLayer=null,this.el=t,this.isOpen=!1,this.padding={bottom:i.paddingBottom||0,left:i.paddingLeft||0,right:i.paddingRight||0,top:i.paddingTop||0},this.resize()}function p(t){var e=t.offsetWidth,i=t.offsetHeight,n=0,s=0;if(t.offsetParent)do{n+=t.offsetLeft,s+=t.offsetTop}while(t=t.offsetParent);return{height:i,left:n,top:s,width:e}}function g(t){H.a.call(this);var e=l(t),i=Object(x.f)({maxScale:2,minScale:m(e.width,e.height),scaleIncrement:.25},i);this._containerPosition=null,this._hammer=null,this._hooks={},this._magnifierConfig=e,this._magnifierLayer=null,this._magnifierImage=null,this._transform={scale:1,tmpScale:1,tmpX:0,tmpY:0,x:0,y:0},this.el=t,this.isOpen=!1,this.maxScale=i.maxScale,this.minScale=i.minScale,this.scaleIncrement=i.scaleIncrement,this.resize()}function m(t,e){return t>e?(window.innerWidth-25-25)/t:(window.innerHeight-25-25)/e}function b(t,e,i,n,s){var o=Math.ceil(i*n/2),r=Math.ceil(i*s/2),l=t,a=e,c=!1;return l>o?(l=o,c=!0):l<-o&&(l=-o,c=!0),a>r?(a=r,c=!0):a<-r&&(a=-r,c=!0),!!c&&{x:l,y:a}}function v(t,e){t.style.transform=e,t.style.oTransform=e,t.style.msTransform=e,t.style.mozTransform=e,t.style.webkitTransform=e}function _(){var t=document.querySelectorAll("."+z);if(t){for(var e=-1,i=t.length;++e<i;)E(t[e])||(I(t[e]),y(t[e]),j(t[e]));T()}}function y(t){var e=o(t),i=r(t);e&&i&&G.bindElement(t)}function O(t){Z=t,t.setAttribute("is-focused",!0),Object(x.a)(t.querySelector("."+L),N)}function S(t){t.removeAttribute("is-focused"),Object(x.N)(t.querySelector("."+L),N),Z=null}function w(t){t.preventDefault()}function j(t){A.c&&(Object(x.N)(t,"is-hover"),Object(x.a)(t,"is-touch"),Object(x.b)(t.querySelector("."+L),"focus",O),Object(x.b)(t.querySelector("."+L),"blur",S),Object(x.b)(t.querySelector("."+C),"click",function(t){Boolean(this.getAttribute("is-focused"))?S(this):O(this)}),Object(x.b)(t.querySelector("."+P+" a"),"click",w))}function T(){J||(J=!0,Object(x.b)(document.body,"touchend",function(t){if(null!==Z){var e=Object(x.w)(t.target,"."+C);if(Z===e)return;S(Z)}}))}function E(t){return t.hasAttribute("data-figure-initialised")}function I(t){t.setAttribute("data-figure-initialised",!0)}var k=i(9),A=i(5),x=i(0),N="is-visible",z="c-figure",C="c-figure__container",L="c-figure__toolbar",P="c-figure__toolbar-listitem--more",q="js-c-figure-magnify-config",D="js-c-figure-magnify-zoom",R=null,M=i(1),H=i.n(M);d.prototype=Object(x.D)(H.a.prototype,{_bind:function(){this._bindDOM(),this._bindEvents(),this._bindStyles()},_bindDOM:function(){var t=this._magnifierLayer=document.createElement("div");t.className=["c-figure__magnifier","is-hidden"].join(" "),t.setAttribute("title","Click to close"),t.style.backgroundImage="url("+this._magnifierConfig.url+")",this.el.querySelector(".c-figure__wrapper").appendChild(t);t.offsetWidth;c(this._magnifierConfig.url).then(function(e){t.style.backgroundImage="url("+e+")",Object(x.N)(t,"is-hidden")})},_bindEvents:function(){this._hooks.onLayerClick=this.close.bind(this),Object(x.c)(this._magnifierLayer,"click",this._hooks.onLayerClick),this._hooks.onLayerMousemove=this._onLayerMousemove.bind(this),Object(x.b)(this._magnifierLayer,"mousemove",this._hooks.onLayerMousemove)},_bindStyles:function(){Object(x.a)(this.el,"has-magnifier"),Object(x.a)(this.el.querySelector("."+L),"is-hidden")},_onLayerMousemove:function(t){this.pan(t.pageX-this._containerPosition.left,t.pageY-this._containerPosition.top)},_unbind:function(){this._unbindStyles(),this._unbindEvents(),this._unbindDOM()},_unbindDOM:function(){Object(x.a)(this._magnifierLayer,"is-hidden"),setTimeout(function(){Object(x.O)(this._magnifierLayer),this._magnifierLayer=null}.bind(this),500)},_unbindEvents:function(){Object(x.P)(this._magnifierLayer,"click",this._hooks.onLayerClick),this._hooks.onLayerClick=null,Object(x.P)(this._magnifierLayer,"mousemove",this._hooks.onLayerMousemove),this._hooks.onLayerMousemove=null},_unbindStyles:function(){Object(x.N)(this.el,"has-magnifier"),Object(x.N)(this.el.querySelector("."+L),"is-hidden")},close:function(){this.isOpen&&(this.isOpen=!1,this._unbind(),this.emit("close",h(this)))},constructor:d,destroy:function(){this.close(),this.removeAllListeners(),this.el=null},open:function(){this.isOpen||(this.isOpen=!0,this._bind(),this.pan(this._containerPosition.width/2,this._containerPosition.height/2),this.emit("open",u(this)))},pan:function(t,e){var i=this.padding.left,n=this._containerPosition.width-this.padding.right-this.padding.left,s=this.padding.top,o=this._containerPosition.height-this.padding.bottom-this.padding.top,r=Object(x.g)(i,n,t),l=Object(x.g)(s,o,e),c=a(r,i,n,0,100),h=a(l,s,o,0,100);this._magnifierLayer.style.backgroundPosition=c+"% "+h+"%"},resize:function(){this._containerPosition=p(this.el),this.emit("resize",f(this))}}),d.bindElement=function(t,e){var i=t.querySelector("."+D),n=null;Object(x.b)(i,"click",function(i){return i.preventDefault(),n=new d(t,e),n.open(),n.once("close",function(){n.destroy(),n=null}),!1})};var B=d,F=i(21),Y=i.n(F),V=i(22),W=i.n(V);g.prototype=Object(x.D)(H.a.prototype,{_bindDom:function(){this._magnifierLayer=document.createElement("div"),this._magnifierLayer.className=["c-figure__magnifier","c-figure__magnifier--full-screen"].join(" "),this._magnifierLayer.innerHTML=W()({image_url:this._magnifierConfig.url}),document.body.appendChild(this._magnifierLayer),this._magnifierImage=this._magnifierLayer.querySelector(".c-figure__magnifier-image")},_bindEvents:function(){this._hammer=new Y.a(this._magnifierLayer,{}),this._hammer.get("pinch").set({enable:!0}),this._hooks.onClose=this.close.bind(this),this._hooks.onZoomIn=this.zoomIn.bind(this),this._hooks.onZoomOut=this.zoomOut.bind(this),this._hooks.onPanPinch=this._onPanPinch.bind(this);var t=this._magnifierLayer.querySelector(".js-c-figure-magnify-zoom-close"),e=this._magnifierLayer.querySelector(".js-c-figure-magnify-zoom-in"),i=this._magnifierLayer.querySelector(".js-c-figure-magnify-zoom-out");Object(x.b)(t,"click",this._hooks.onClose),Object(x.b)(e,"touchend",this._hooks.onZoomIn),Object(x.b)(i,"touchend",this._hooks.onZoomOut),this._hammer.on("pan pinch panend pinchend",this._hooks.onPanPinch)},_onPanPinch:function(t){var e=this._transform.scale,i=this._transform.x,n=this._transform.y;1!==t.scale&&(e=this._transform.scale*t.scale,e=Object(x.g)(this.minScale,this.maxScale,e)),i=this._transform.x+t.deltaX,n=this._transform.y+t.deltaY;var s=b(i,n,e,this._magnifierConfig.width,this._magnifierConfig.height);s&&(i=s.x,n=s.y),this._setImageTransform(i,n,e),"pinchend"!=t.type&&"panend"!=t.type||(this._transform.scale=e,this._transform.x=i,this._transform.y=n)},_setImageTransform:function(t,e,i){var n=["translate3d("+t+"px, "+e+"px, 0)","scale3d("+i+", "+i+", 1)"];v(this._magnifierImage,n.join(" "))},_unbindDom:function(){this._magnifierImage=null,Object(x.O)(this._magnifierLayer),this._magnifierLayer=null},_unbindEvents:function(){var t=this._magnifierLayer.querySelector(".js-c-figure-magnify-zoom-close"),e=this._magnifierLayer.querySelector(".js-c-figure-magnify-zoom-in"),i=this._magnifierLayer.querySelector(".js-c-figure-magnify-zoom-out");Object(x.P)(t,"touchend",this._hooks.onClose),Object(x.P)(e,"touchend",this._hooks.onZoomIn),Object(x.P)(i,"touchend",this._hooks.onZoomOut),this._hammer.off("pan pinch panend pinchend",this._hooks.onPanPinch),this._hooks.onClose=null,this._hooks.onZoomIn=null,this._hooks.onZoomOut=null,this._hooks.onPanPinch=null,this._hammer.destroy(),this._hammer=null},close:function(){this.isOpen&&(this.isOpen=!1,s(),this._unbindEvents(),this._unbindDom(),this.emit("close",h(this)))},constructor:g,destroy:function(){this.close(),this.removeAllListeners(),this.el=null},open:function(){this.isOpen||(this.isOpen=!0,n(),this._bindDom(),this._bindEvents(),this.zoom(this.minScale),this.emit("open",u(this)))},resize:function(){this.emit("resize",f(this))},zoom:function(t){var e=Object(x.g)(this.minScale,this.maxScale,t),i=this._transform.x,n=this._transform.y,s=b(i,n,e,this._magnifierConfig.width,this._magnifierConfig.height);s&&(i=s.x,n=s.y),this._setImageTransform(i,n,e),this._transform.scale=e,this._transform.x=i,this._transform.y=n},zoomIn:function(){this.zoom(this._transform.scale+this.scaleIncrement)},zoomOut:function(){this.zoom(this._transform.scale-this.scaleIncrement)}}),g.bindElement=function(t,e){var i=t.querySelector("."+D),n=null;Object(x.b)(i,"touchend",function(i){return i.preventDefault(),n=new g(t,e),n.open(),n.once("close",function(){n.destroy(),n=null}),!1})};var U=g,X=B;A.c&&(X=U);var G=X,Z=(e.a={init:function(){k.a.init(),_()}},null),J=!1,Z=null},21:function(t,e,i){var n;/*! Hammer.JS - v2.0.7 - 2016-04-22
 * http://hammerjs.github.io/
 *
 * Copyright (c) 2016 Jorik Tangelder;
 * Licensed under the MIT license */
!function(s,o,r,l){"use strict";function a(t,e,i){return setTimeout(d(t,i),e)}function c(t,e,i){return!!Array.isArray(t)&&(h(t,i[e],i),!0)}function h(t,e,i){var n;if(t)if(t.forEach)t.forEach(e,i);else if(t.length!==l)for(n=0;n<t.length;)e.call(i,t[n],n,t),n++;else for(n in t)t.hasOwnProperty(n)&&e.call(i,t[n],n,t)}function u(t,e,i){var n="DEPRECATED METHOD: "+e+"\n"+i+" AT \n";return function(){var e=new Error("get-stack-trace"),i=e&&e.stack?e.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",o=s.console&&(s.console.warn||s.console.log);return o&&o.call(s.console,n,i),t.apply(this,arguments)}}function f(t,e,i){var n,s=e.prototype;n=t.prototype=Object.create(s),n.constructor=t,n._super=s,i&&pt(n,i)}function d(t,e){return function(){return t.apply(e,arguments)}}function p(t,e){return typeof t==bt?t.apply(e?e[0]||l:l,e):t}function g(t,e){return t===l?e:t}function m(t,e,i){h(y(e),function(e){t.addEventListener(e,i,!1)})}function b(t,e,i){h(y(e),function(e){t.removeEventListener(e,i,!1)})}function v(t,e){for(;t;){if(t==e)return!0;t=t.parentNode}return!1}function _(t,e){return t.indexOf(e)>-1}function y(t){return t.trim().split(/\s+/g)}function O(t,e,i){if(t.indexOf&&!i)return t.indexOf(e);for(var n=0;n<t.length;){if(i&&t[n][i]==e||!i&&t[n]===e)return n;n++}return-1}function S(t){return Array.prototype.slice.call(t,0)}function w(t,e,i){for(var n=[],s=[],o=0;o<t.length;){var r=e?t[o][e]:t[o];O(s,r)<0&&n.push(t[o]),s[o]=r,o++}return i&&(n=e?n.sort(function(t,i){return t[e]>i[e]}):n.sort()),n}function j(t,e){for(var i,n,s=e[0].toUpperCase()+e.slice(1),o=0;o<gt.length;){if(i=gt[o],(n=i?i+s:e)in t)return n;o++}return l}function T(){return wt++}function E(t){var e=t.ownerDocument||t;return e.defaultView||e.parentWindow||s}function I(t,e){var i=this;this.manager=t,this.callback=e,this.element=t.element,this.target=t.options.inputTarget,this.domHandler=function(e){p(t.options.enable,[t])&&i.handler(e)},this.init()}function k(t){var e=t.options.inputClass;return new(e||(Et?F:It?W:Tt?X:B))(t,A)}function A(t,e,i){var n=i.pointers.length,s=i.changedPointers.length,o=e&At&&n-s==0,r=e&(Nt|zt)&&n-s==0;i.isFirst=!!o,i.isFinal=!!r,o&&(t.session={}),i.eventType=e,x(t,i),t.emit("hammer.input",i),t.recognize(i),t.session.prevInput=i}function x(t,e){var i=t.session,n=e.pointers,s=n.length;i.firstInput||(i.firstInput=C(e)),s>1&&!i.firstMultiple?i.firstMultiple=C(e):1===s&&(i.firstMultiple=!1);var o=i.firstInput,r=i.firstMultiple,l=r?r.center:o.center,a=e.center=L(n);e.timeStamp=yt(),e.deltaTime=e.timeStamp-o.timeStamp,e.angle=R(l,a),e.distance=D(l,a),N(i,e),e.offsetDirection=q(e.deltaX,e.deltaY);var c=P(e.deltaTime,e.deltaX,e.deltaY);e.overallVelocityX=c.x,e.overallVelocityY=c.y,e.overallVelocity=_t(c.x)>_t(c.y)?c.x:c.y,e.scale=r?H(r.pointers,n):1,e.rotation=r?M(r.pointers,n):0,e.maxPointers=i.prevInput?e.pointers.length>i.prevInput.maxPointers?e.pointers.length:i.prevInput.maxPointers:e.pointers.length,z(i,e);var h=t.element;v(e.srcEvent.target,h)&&(h=e.srcEvent.target),e.target=h}function N(t,e){var i=e.center,n=t.offsetDelta||{},s=t.prevDelta||{},o=t.prevInput||{};e.eventType!==At&&o.eventType!==Nt||(s=t.prevDelta={x:o.deltaX||0,y:o.deltaY||0},n=t.offsetDelta={x:i.x,y:i.y}),e.deltaX=s.x+(i.x-n.x),e.deltaY=s.y+(i.y-n.y)}function z(t,e){var i,n,s,o,r=t.lastInterval||e,a=e.timeStamp-r.timeStamp;if(e.eventType!=zt&&(a>kt||r.velocity===l)){var c=e.deltaX-r.deltaX,h=e.deltaY-r.deltaY,u=P(a,c,h);n=u.x,s=u.y,i=_t(u.x)>_t(u.y)?u.x:u.y,o=q(c,h),t.lastInterval=e}else i=r.velocity,n=r.velocityX,s=r.velocityY,o=r.direction;e.velocity=i,e.velocityX=n,e.velocityY=s,e.direction=o}function C(t){for(var e=[],i=0;i<t.pointers.length;)e[i]={clientX:vt(t.pointers[i].clientX),clientY:vt(t.pointers[i].clientY)},i++;return{timeStamp:yt(),pointers:e,center:L(e),deltaX:t.deltaX,deltaY:t.deltaY}}function L(t){var e=t.length;if(1===e)return{x:vt(t[0].clientX),y:vt(t[0].clientY)};for(var i=0,n=0,s=0;s<e;)i+=t[s].clientX,n+=t[s].clientY,s++;return{x:vt(i/e),y:vt(n/e)}}function P(t,e,i){return{x:e/t||0,y:i/t||0}}function q(t,e){return t===e?Ct:_t(t)>=_t(e)?t<0?Lt:Pt:e<0?qt:Dt}function D(t,e,i){i||(i=Bt);var n=e[i[0]]-t[i[0]],s=e[i[1]]-t[i[1]];return Math.sqrt(n*n+s*s)}function R(t,e,i){i||(i=Bt);var n=e[i[0]]-t[i[0]],s=e[i[1]]-t[i[1]];return 180*Math.atan2(s,n)/Math.PI}function M(t,e){return R(e[1],e[0],Ft)+R(t[1],t[0],Ft)}function H(t,e){return D(e[0],e[1],Ft)/D(t[0],t[1],Ft)}function B(){this.evEl=Vt,this.evWin=Wt,this.pressed=!1,I.apply(this,arguments)}function F(){this.evEl=Gt,this.evWin=Zt,I.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}function Y(){this.evTarget=Kt,this.evWin=$t,this.started=!1,I.apply(this,arguments)}function V(t,e){var i=S(t.touches),n=S(t.changedTouches);return e&(Nt|zt)&&(i=w(i.concat(n),"identifier",!0)),[i,n]}function W(){this.evTarget=te,this.targetIds={},I.apply(this,arguments)}function U(t,e){var i=S(t.touches),n=this.targetIds;if(e&(At|xt)&&1===i.length)return n[i[0].identifier]=!0,[i,i];var s,o,r=S(t.changedTouches),l=[],a=this.target;if(o=i.filter(function(t){return v(t.target,a)}),e===At)for(s=0;s<o.length;)n[o[s].identifier]=!0,s++;for(s=0;s<r.length;)n[r[s].identifier]&&l.push(r[s]),e&(Nt|zt)&&delete n[r[s].identifier],s++;return l.length?[w(o.concat(l),"identifier",!0),l]:void 0}function X(){I.apply(this,arguments);var t=d(this.handler,this);this.touch=new W(this.manager,t),this.mouse=new B(this.manager,t),this.primaryTouch=null,this.lastTouches=[]}function G(t,e){t&At?(this.primaryTouch=e.changedPointers[0].identifier,Z.call(this,e)):t&(Nt|zt)&&Z.call(this,e)}function Z(t){var e=t.changedPointers[0];if(e.identifier===this.primaryTouch){var i={x:e.clientX,y:e.clientY};this.lastTouches.push(i);var n=this.lastTouches,s=function(){var t=n.indexOf(i);t>-1&&n.splice(t,1)};setTimeout(s,ee)}}function J(t){for(var e=t.srcEvent.clientX,i=t.srcEvent.clientY,n=0;n<this.lastTouches.length;n++){var s=this.lastTouches[n],o=Math.abs(e-s.x),r=Math.abs(i-s.y);if(o<=ie&&r<=ie)return!0}return!1}function K(t,e){this.manager=t,this.set(e)}function $(t){if(_(t,le))return le;var e=_(t,ae),i=_(t,ce);return e&&i?le:e||i?e?ae:ce:_(t,re)?re:oe}function Q(t){this.options=pt({},this.defaults,t||{}),this.id=T(),this.manager=null,this.options.enable=g(this.options.enable,!0),this.state=ue,this.simultaneous={},this.requireFail=[]}function tt(t){return t&me?"cancel":t&pe?"end":t&de?"move":t&fe?"start":""}function et(t){return t==Dt?"down":t==qt?"up":t==Lt?"left":t==Pt?"right":""}function it(t,e){var i=e.manager;return i?i.get(t):t}function nt(){Q.apply(this,arguments)}function st(){nt.apply(this,arguments),this.pX=null,this.pY=null}function ot(){nt.apply(this,arguments)}function rt(){Q.apply(this,arguments),this._timer=null,this._input=null}function lt(){nt.apply(this,arguments)}function at(){nt.apply(this,arguments)}function ct(){Q.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}function ht(t,e){return e=e||{},e.recognizers=g(e.recognizers,ht.defaults.preset),new ut(t,e)}function ut(t,e){this.options=pt({},ht.defaults,e||{}),this.options.inputTarget=this.options.inputTarget||t,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=t,this.input=k(this),this.touchAction=new K(this,this.options.touchAction),ft(this,!0),h(this.options.recognizers,function(t){var e=this.add(new t[0](t[1]));t[2]&&e.recognizeWith(t[2]),t[3]&&e.requireFailure(t[3])},this)}function ft(t,e){var i=t.element;if(i.style){var n;h(t.options.cssProps,function(s,o){n=j(i.style,o),e?(t.oldCssProps[n]=i.style[n],i.style[n]=s):i.style[n]=t.oldCssProps[n]||""}),e||(t.oldCssProps={})}}function dt(t,e){var i=o.createEvent("Event");i.initEvent(t,!0,!0),i.gesture=e,e.target.dispatchEvent(i)}var pt,gt=["","webkit","Moz","MS","ms","o"],mt=o.createElement("div"),bt="function",vt=Math.round,_t=Math.abs,yt=Date.now;pt="function"!=typeof Object.assign?function(t){if(t===l||null===t)throw new TypeError("Cannot convert undefined or null to object");for(var e=Object(t),i=1;i<arguments.length;i++){var n=arguments[i];if(n!==l&&null!==n)for(var s in n)n.hasOwnProperty(s)&&(e[s]=n[s])}return e}:Object.assign;var Ot=u(function(t,e,i){for(var n=Object.keys(e),s=0;s<n.length;)(!i||i&&t[n[s]]===l)&&(t[n[s]]=e[n[s]]),s++;return t},"extend","Use `assign`."),St=u(function(t,e){return Ot(t,e,!0)},"merge","Use `assign`."),wt=1,jt=/mobile|tablet|ip(ad|hone|od)|android/i,Tt="ontouchstart"in s,Et=j(s,"PointerEvent")!==l,It=Tt&&jt.test(navigator.userAgent),kt=25,At=1,xt=2,Nt=4,zt=8,Ct=1,Lt=2,Pt=4,qt=8,Dt=16,Rt=Lt|Pt,Mt=qt|Dt,Ht=Rt|Mt,Bt=["x","y"],Ft=["clientX","clientY"];I.prototype={handler:function(){},init:function(){this.evEl&&m(this.element,this.evEl,this.domHandler),this.evTarget&&m(this.target,this.evTarget,this.domHandler),this.evWin&&m(E(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&b(this.element,this.evEl,this.domHandler),this.evTarget&&b(this.target,this.evTarget,this.domHandler),this.evWin&&b(E(this.element),this.evWin,this.domHandler)}};var Yt={mousedown:At,mousemove:xt,mouseup:Nt},Vt="mousedown",Wt="mousemove mouseup";f(B,I,{handler:function(t){var e=Yt[t.type];e&At&&0===t.button&&(this.pressed=!0),e&xt&&1!==t.which&&(e=Nt),this.pressed&&(e&Nt&&(this.pressed=!1),this.callback(this.manager,e,{pointers:[t],changedPointers:[t],pointerType:"mouse",srcEvent:t}))}});var Ut={pointerdown:At,pointermove:xt,pointerup:Nt,pointercancel:zt,pointerout:zt},Xt={2:"touch",3:"pen",4:"mouse",5:"kinect"},Gt="pointerdown",Zt="pointermove pointerup pointercancel";s.MSPointerEvent&&!s.PointerEvent&&(Gt="MSPointerDown",Zt="MSPointerMove MSPointerUp MSPointerCancel"),f(F,I,{handler:function(t){var e=this.store,i=!1,n=t.type.toLowerCase().replace("ms",""),s=Ut[n],o=Xt[t.pointerType]||t.pointerType,r="touch"==o,l=O(e,t.pointerId,"pointerId");s&At&&(0===t.button||r)?l<0&&(e.push(t),l=e.length-1):s&(Nt|zt)&&(i=!0),l<0||(e[l]=t,this.callback(this.manager,s,{pointers:e,changedPointers:[t],pointerType:o,srcEvent:t}),i&&e.splice(l,1))}});var Jt={touchstart:At,touchmove:xt,touchend:Nt,touchcancel:zt},Kt="touchstart",$t="touchstart touchmove touchend touchcancel";f(Y,I,{handler:function(t){var e=Jt[t.type];if(e===At&&(this.started=!0),this.started){var i=V.call(this,t,e);e&(Nt|zt)&&i[0].length-i[1].length==0&&(this.started=!1),this.callback(this.manager,e,{pointers:i[0],changedPointers:i[1],pointerType:"touch",srcEvent:t})}}});var Qt={touchstart:At,touchmove:xt,touchend:Nt,touchcancel:zt},te="touchstart touchmove touchend touchcancel";f(W,I,{handler:function(t){var e=Qt[t.type],i=U.call(this,t,e);i&&this.callback(this.manager,e,{pointers:i[0],changedPointers:i[1],pointerType:"touch",srcEvent:t})}});var ee=2500,ie=25;f(X,I,{handler:function(t,e,i){var n="touch"==i.pointerType,s="mouse"==i.pointerType;if(!(s&&i.sourceCapabilities&&i.sourceCapabilities.firesTouchEvents)){if(n)G.call(this,e,i);else if(s&&J.call(this,i))return;this.callback(t,e,i)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});var ne=j(mt.style,"touchAction"),se=ne!==l,oe="auto",re="manipulation",le="none",ae="pan-x",ce="pan-y",he=function(){if(!se)return!1;var t={},e=s.CSS&&s.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function(i){t[i]=!e||s.CSS.supports("touch-action",i)}),t}();K.prototype={set:function(t){"compute"==t&&(t=this.compute()),se&&this.manager.element.style&&he[t]&&(this.manager.element.style[ne]=t),this.actions=t.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var t=[];return h(this.manager.recognizers,function(e){p(e.options.enable,[e])&&(t=t.concat(e.getTouchAction()))}),$(t.join(" "))},preventDefaults:function(t){var e=t.srcEvent,i=t.offsetDirection;if(this.manager.session.prevented)return void e.preventDefault();var n=this.actions,s=_(n,le)&&!he[le],o=_(n,ce)&&!he[ce],r=_(n,ae)&&!he[ae];if(s){var l=1===t.pointers.length,a=t.distance<2,c=t.deltaTime<250;if(l&&a&&c)return}return r&&o?void 0:s||o&&i&Rt||r&&i&Mt?this.preventSrc(e):void 0},preventSrc:function(t){this.manager.session.prevented=!0,t.preventDefault()}};var ue=1,fe=2,de=4,pe=8,ge=pe,me=16;Q.prototype={defaults:{},set:function(t){return pt(this.options,t),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(t){if(c(t,"recognizeWith",this))return this;var e=this.simultaneous;return t=it(t,this),e[t.id]||(e[t.id]=t,t.recognizeWith(this)),this},dropRecognizeWith:function(t){return c(t,"dropRecognizeWith",this)?this:(t=it(t,this),delete this.simultaneous[t.id],this)},requireFailure:function(t){if(c(t,"requireFailure",this))return this;var e=this.requireFail;return t=it(t,this),-1===O(e,t)&&(e.push(t),t.requireFailure(this)),this},dropRequireFailure:function(t){if(c(t,"dropRequireFailure",this))return this;t=it(t,this);var e=O(this.requireFail,t);return e>-1&&this.requireFail.splice(e,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(t){return!!this.simultaneous[t.id]},emit:function(t){function e(e){i.manager.emit(e,t)}var i=this,n=this.state;n<pe&&e(i.options.event+tt(n)),e(i.options.event),t.additionalEvent&&e(t.additionalEvent),n>=pe&&e(i.options.event+tt(n))},tryEmit:function(t){if(this.canEmit())return this.emit(t);this.state=32},canEmit:function(){for(var t=0;t<this.requireFail.length;){if(!(this.requireFail[t].state&(32|ue)))return!1;t++}return!0},recognize:function(t){var e=pt({},t);if(!p(this.options.enable,[this,e]))return this.reset(),void(this.state=32);this.state&(ge|me|32)&&(this.state=ue),this.state=this.process(e),this.state&(fe|de|pe|me)&&this.tryEmit(e)},process:function(t){},getTouchAction:function(){},reset:function(){}},f(nt,Q,{defaults:{pointers:1},attrTest:function(t){var e=this.options.pointers;return 0===e||t.pointers.length===e},process:function(t){var e=this.state,i=t.eventType,n=e&(fe|de),s=this.attrTest(t);return n&&(i&zt||!s)?e|me:n||s?i&Nt?e|pe:e&fe?e|de:fe:32}}),f(st,nt,{defaults:{event:"pan",threshold:10,pointers:1,direction:Ht},getTouchAction:function(){var t=this.options.direction,e=[];return t&Rt&&e.push(ce),t&Mt&&e.push(ae),e},directionTest:function(t){var e=this.options,i=!0,n=t.distance,s=t.direction,o=t.deltaX,r=t.deltaY;return s&e.direction||(e.direction&Rt?(s=0===o?Ct:o<0?Lt:Pt,i=o!=this.pX,n=Math.abs(t.deltaX)):(s=0===r?Ct:r<0?qt:Dt,i=r!=this.pY,n=Math.abs(t.deltaY))),t.direction=s,i&&n>e.threshold&&s&e.direction},attrTest:function(t){return nt.prototype.attrTest.call(this,t)&&(this.state&fe||!(this.state&fe)&&this.directionTest(t))},emit:function(t){this.pX=t.deltaX,this.pY=t.deltaY;var e=et(t.direction);e&&(t.additionalEvent=this.options.event+e),this._super.emit.call(this,t)}}),f(ot,nt,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[le]},attrTest:function(t){return this._super.attrTest.call(this,t)&&(Math.abs(t.scale-1)>this.options.threshold||this.state&fe)},emit:function(t){if(1!==t.scale){var e=t.scale<1?"in":"out";t.additionalEvent=this.options.event+e}this._super.emit.call(this,t)}}),f(rt,Q,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return[oe]},process:function(t){var e=this.options,i=t.pointers.length===e.pointers,n=t.distance<e.threshold,s=t.deltaTime>e.time;if(this._input=t,!n||!i||t.eventType&(Nt|zt)&&!s)this.reset();else if(t.eventType&At)this.reset(),this._timer=a(function(){this.state=ge,this.tryEmit()},e.time,this);else if(t.eventType&Nt)return ge;return 32},reset:function(){clearTimeout(this._timer)},emit:function(t){this.state===ge&&(t&&t.eventType&Nt?this.manager.emit(this.options.event+"up",t):(this._input.timeStamp=yt(),this.manager.emit(this.options.event,this._input)))}}),f(lt,nt,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[le]},attrTest:function(t){return this._super.attrTest.call(this,t)&&(Math.abs(t.rotation)>this.options.threshold||this.state&fe)}}),f(at,nt,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:Rt|Mt,pointers:1},getTouchAction:function(){return st.prototype.getTouchAction.call(this)},attrTest:function(t){var e,i=this.options.direction;return i&(Rt|Mt)?e=t.overallVelocity:i&Rt?e=t.overallVelocityX:i&Mt&&(e=t.overallVelocityY),this._super.attrTest.call(this,t)&&i&t.offsetDirection&&t.distance>this.options.threshold&&t.maxPointers==this.options.pointers&&_t(e)>this.options.velocity&&t.eventType&Nt},emit:function(t){var e=et(t.offsetDirection);e&&this.manager.emit(this.options.event+e,t),this.manager.emit(this.options.event,t)}}),f(ct,Q,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[re]},process:function(t){var e=this.options,i=t.pointers.length===e.pointers,n=t.distance<e.threshold,s=t.deltaTime<e.time;if(this.reset(),t.eventType&At&&0===this.count)return this.failTimeout();if(n&&s&&i){if(t.eventType!=Nt)return this.failTimeout();var o=!this.pTime||t.timeStamp-this.pTime<e.interval,r=!this.pCenter||D(this.pCenter,t.center)<e.posThreshold;this.pTime=t.timeStamp,this.pCenter=t.center,r&&o?this.count+=1:this.count=1,this._input=t;if(0===this.count%e.taps)return this.hasRequireFailures()?(this._timer=a(function(){this.state=ge,this.tryEmit()},e.interval,this),fe):ge}return 32},failTimeout:function(){return this._timer=a(function(){this.state=32},this.options.interval,this),32},reset:function(){clearTimeout(this._timer)},emit:function(){this.state==ge&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}}),ht.VERSION="2.0.7",ht.defaults={domEvents:!1,touchAction:"compute",enable:!0,inputTarget:null,inputClass:null,preset:[[lt,{enable:!1}],[ot,{enable:!1},["rotate"]],[at,{direction:Rt}],[st,{direction:Rt},["swipe"]],[ct],[ct,{event:"doubletap",taps:2},["tap"]],[rt]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};ut.prototype={set:function(t){return pt(this.options,t),t.touchAction&&this.touchAction.update(),t.inputTarget&&(this.input.destroy(),this.input.target=t.inputTarget,this.input.init()),this},stop:function(t){this.session.stopped=t?2:1},recognize:function(t){var e=this.session;if(!e.stopped){this.touchAction.preventDefaults(t);var i,n=this.recognizers,s=e.curRecognizer;(!s||s&&s.state&ge)&&(s=e.curRecognizer=null);for(var o=0;o<n.length;)i=n[o],2===e.stopped||s&&i!=s&&!i.canRecognizeWith(s)?i.reset():i.recognize(t),!s&&i.state&(fe|de|pe)&&(s=e.curRecognizer=i),o++}},get:function(t){if(t instanceof Q)return t;for(var e=this.recognizers,i=0;i<e.length;i++)if(e[i].options.event==t)return e[i];return null},add:function(t){if(c(t,"add",this))return this;var e=this.get(t.options.event);return e&&this.remove(e),this.recognizers.push(t),t.manager=this,this.touchAction.update(),t},remove:function(t){if(c(t,"remove",this))return this;if(t=this.get(t)){var e=this.recognizers,i=O(e,t);-1!==i&&(e.splice(i,1),this.touchAction.update())}return this},on:function(t,e){if(t!==l&&e!==l){var i=this.handlers;return h(y(t),function(t){i[t]=i[t]||[],i[t].push(e)}),this}},off:function(t,e){if(t!==l){var i=this.handlers;return h(y(t),function(t){e?i[t]&&i[t].splice(O(i[t],e),1):delete i[t]}),this}},emit:function(t,e){this.options.domEvents&&dt(t,e);var i=this.handlers[t]&&this.handlers[t].slice();if(i&&i.length){e.type=t,e.preventDefault=function(){e.srcEvent.preventDefault()};for(var n=0;n<i.length;)i[n](e),n++}},destroy:function(){this.element&&ft(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}},pt(ht,{INPUT_START:At,INPUT_MOVE:xt,INPUT_END:Nt,INPUT_CANCEL:zt,STATE_POSSIBLE:ue,STATE_BEGAN:fe,STATE_CHANGED:de,STATE_ENDED:pe,STATE_RECOGNIZED:ge,STATE_CANCELLED:me,STATE_FAILED:32,DIRECTION_NONE:Ct,DIRECTION_LEFT:Lt,DIRECTION_RIGHT:Pt,DIRECTION_UP:qt,DIRECTION_DOWN:Dt,DIRECTION_HORIZONTAL:Rt,DIRECTION_VERTICAL:Mt,DIRECTION_ALL:Ht,Manager:ut,Input:I,TouchAction:K,TouchInput:W,MouseInput:B,PointerEventInput:F,TouchMouseInput:X,SingleTouchInput:Y,Recognizer:Q,AttrRecognizer:nt,Tap:ct,Pan:st,Swipe:at,Pinch:ot,Rotate:lt,Press:rt,on:m,off:b,each:h,merge:St,extend:Ot,assign:pt,inherit:f,bindFn:d,prefixed:j}),(void 0!==s?s:"undefined"!=typeof self?self:{}).Hammer=ht,(n=function(){return ht}.call(e,i,e,t))!==l&&(t.exports=n)}(window,document)},22:function(t,e,i){var n=i(17);t.exports=function(){var t=new n.Template({code:function(t,e,i){var n=this;return n.b(i=i||""),n.b('<ul class="global__list-reset c-figure__magnifier-toolbar">'),n.b("\n"+i),n.b('    <li class="c-figure__magnifier-toolbar-item">'),n.b("\n"+i),n.b('        <button class="c-figure__magnifier-button c-figure__magnifier-button--close js-c-figure-magnify-zoom-close">'),n.b("\n"+i),n.b('            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28.4 28.4"><path d="M26.4 3.3l-1-.9-10.8 10.9L3.7 2.4l-.9.9 10.8 10.9L2.8 25.1l.9.9 10.9-10.9L25.4 26l1-.9-10.9-10.9"/></svg>'),n.b("\n"+i),n.b("        </button>"),n.b("\n"+i),n.b("    </li>"),n.b("\n"+i),n.b('    <li class="c-figure__magnifier-toolbar-item">'),n.b("\n"+i),n.b('        <button class="c-figure__magnifier-button c-figure__magnifier-button--zoom-in js-c-figure-magnify-zoom-in">'),n.b("\n"+i),n.b('            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28.4 28.4"><path d="M26.9 13.5H14.8V1.4h-1.3v12.1H1.4v1.3h12.1v12.1h1.3V14.8h12.1"/></svg>'),n.b("\n"+i),n.b("        </button>"),n.b("\n"+i),n.b("    </li>"),n.b("\n"+i),n.b('    <li class="c-figure__magnifier-toolbar-item">'),n.b("\n"+i),n.b('        <button class="c-figure__magnifier-button c-figure__magnifier-button--zoom-out js-c-figure-magnify-zoom-out">'),n.b("\n"+i),n.b('            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28.4 28.4"><path fill="none" stroke="#000" stroke-width="1.3" d="M1.4 14.2h25.5"/></svg>'),n.b("\n"+i),n.b("        </button>"),n.b("\n"+i),n.b("    </li>"),n.b("\n"+i),n.b("</ul>"),n.b("\n"),n.b("\n"+i),n.b('<div class="c-figure__magnifier-image">'),n.b("\n"+i),n.b('    <div class="c-figure__magnifier-image-center">'),n.b("\n"+i),n.b('        <img src="'),n.b(n.v(n.f("image_url",t,e,0))),n.b('" />'),n.b("\n"+i),n.b("    </div>"),n.b("\n"+i),n.b("</div>"),n.fl()},partials:{},subs:{}},'<ul class="global__list-reset c-figure__magnifier-toolbar">\n    <li class="c-figure__magnifier-toolbar-item">\n        <button class="c-figure__magnifier-button c-figure__magnifier-button--close js-c-figure-magnify-zoom-close">\n            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28.4 28.4"><path d="M26.4 3.3l-1-.9-10.8 10.9L3.7 2.4l-.9.9 10.8 10.9L2.8 25.1l.9.9 10.9-10.9L25.4 26l1-.9-10.9-10.9"/></svg>\n        </button>\n    </li>\n    <li class="c-figure__magnifier-toolbar-item">\n        <button class="c-figure__magnifier-button c-figure__magnifier-button--zoom-in js-c-figure-magnify-zoom-in">\n            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28.4 28.4"><path d="M26.9 13.5H14.8V1.4h-1.3v12.1H1.4v1.3h12.1v12.1h1.3V14.8h12.1"/></svg>\n        </button>\n    </li>\n    <li class="c-figure__magnifier-toolbar-item">\n        <button class="c-figure__magnifier-button c-figure__magnifier-button--zoom-out js-c-figure-magnify-zoom-out">\n            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28.4 28.4"><path fill="none" stroke="#000" stroke-width="1.3" d="M1.4 14.2h25.5"/></svg>\n        </button>\n    </li>\n</ul>\n\n<div class="c-figure__magnifier-image">\n    <div class="c-figure__magnifier-image-center">\n        <img src="{{ image_url }}" />\n    </div>\n</div>',n);return t.render.apply(t,arguments)}},3:function(t,e,i){"use strict";i.d(e,"a",function(){return n}),i.d(e,"l",function(){return s}),i.d(e,"k",function(){return o}),i.d(e,"b",function(){return r}),i.d(e,"c",function(){return l}),i.d(e,"f",function(){return a}),i.d(e,"e",function(){return c}),i.d(e,"d",function(){return h}),i.d(e,"i",function(){return u}),i.d(e,"h",function(){return f}),i.d(e,"g",function(){return d}),i.d(e,"j",function(){return p});var n={UNKNOWN:-1,ARTICLE:0,GALLERY:1,VIDEO:2,"SHOW-SUMMARY":3},s=".js-a-infinite-btn",o=".js-g-image-nav",r=".js-a-gallery",l=".js-g-image",a=".js-g-view-thumbnails",c=".js-g-view-list",h=".js-g-view-thumbnail",u=".js-v-player",f=".js-v-player-embed",d=".js-a-video-body",p=".js-v-player-playlist"},4:function(t,e,i){"use strict";function n(t){c.a.call(this),this._hooks={},this._loading=!1,this._pageCounter=0,this._throttle=0,this._trigger=t.trigger,this._urlBuilder=null,"number"==typeof t.throttle&&(this._throttle=t.throttle),"function"==typeof t.url?this._urlBuilder=t.url:this._urlBuilder=s(t.url),this.el=t.el,this.isEnabled=!1,this.isPaused=!1}function s(t){return function(){return t}}function o(t){this.emit("loadError",Object(l.k)("loadError",this,{data:t.event,originalRequest:t.request})),this._loading=!1}function r(t){this.emit("loadComplete",Object(l.k)("loadComplete",this,{data:t.event,originalRequest:t.request})),this._loading=!1}var l=i(0),a=i(1),c=i.n(a);n.prototype=Object(l.D)(c.a.prototype,{_bind:function(){this._throttle>0?this._hooks.onScroll=Object(l.R)(this.update,this._throttle,this):this._hooks.onScroll=this.update.bind(this),Object(l.b)(this.el,"scroll",this._hooks.onScroll)},_loadUrl:function(){var t=this._urlBuilder(++this._pageCounter);this._loading=!0,this.emit("loading",Object(l.k)("loading",this,{url:t})),Object(l.e)({url:t}).then(r.bind(this),o.bind(this))},_unbind:function(){Object(l.P)(this.el,"scroll",this._hooks.onScroll),this._hooks.onScroll=null},destroy:function(){this.disable(),this.el=null,this.emit("destroy",Object(l.k)("destroy",this)),this.removeAllListeners()},disable:function(){this.isEnabled&&(this.isEnabled=!1,this._unbind(),this.emit("disable",Object(l.k)("disable",this)))},enable:function(){this.isEnabled||(this.isEnabled=!0,this._bind(),this.emit("enable",Object(l.k)("enable",this)))},pause:function(){this.isPaused=!0,this.emit("pause",Object(l.k)("pause",this))},resume:function(){this.isPaused=!1,this.emit("resume",Object(l.k)("resume",this))},update:function(){if(!this._loading&&!this.isPaused&&this.isEnabled){var t=Object(l.z)(this.el);this._trigger(t)&&this._loadUrl()}}}),e.a=n},49:function(t,e,i){"use strict";function n(){Z=new U.d(window),Object(Y.b)(window,"resize",Object(Y.l)(l,150)),F.a.on("add",p),W.b.on("render",c),W.b.on("stop",h),l()}function s(t){return t instanceof U.e}function o(){Z.children.forEach(function(t){t.children.forEach(function(t){s(t)&&t._setInitial(!0)})}),Z.pause()}function r(){Z.children.forEach(function(t){t.children.forEach(function(t){s(t)&&t._setNeutral(!0)})}),Z.resume()}function l(){window.innerWidth<1024?o():(r(),U.b.recalculate(),Z.sortChildren(),Z.update())}function a(t){return function(e){var i=e.el.querySelector(".ad-container");return i&&i.hasAttribute("id")&&i.getAttribute("id")===t}}function c(){Z.recalculate(!0),Z.sortChildren(!0)}function h(t){var e=U.b.obstacles.filter(a(t.ad.id));if(0===e.length&&(e=U.b.stickies.filter(a(t.ad.id))),0!==e.length){e=e[0];var i=e.group;i.removeChild(e),e.destroy(),i.recalculate(!0),i.sortChildren()}}function u(){U.b.recalculate(),Z.sortChildren(!0),Z.update()}function f(t,e,i){var n=null,s=null,o=null;return n=t instanceof U.a?t:new U.a(t),e&&(s=U.e.createStick(e),s.forEach(function(t,e){t.offset.top=60,e!==s.length-1?t.offset.bottom=60:t.offset.bottom=100}),n.addChildren(s,{sort:!1})),i&&(o=U.c.createObstacle(i),n.addChildren(o,{sort:!1})),Z.addChild(n),n.recalculate(!0),n.sortChildren(),{group:n,obstacles:o,sticky:s}}function d(t){return t.children.length>0}function p(t){var e=t.article,i=e.el.querySelector(X.b),n=null,s=null,o=null;e.isInfinite&&e.type!==V.a.ARTICLE?e.type===V.a.GALLERY&&e.isInfinite&&(n=[e.el.querySelector(X.d)],s=e.el.querySelectorAll(X.c),o=f(i,n,s),J(),e.once("expand",function(){f(o.group,Object(G.h)(e.el.querySelectorAll(X.d)).filter(d),e.el.querySelectorAll(X.c)),o=null,J()})):(n=e.el.querySelectorAll(X.d),s=e.el.querySelectorAll(X.c),f(i,n,s),J())}function g(){F.a.on("focus",b),F.a.on("blur",m),F.a.on("imagefocus",v),!0===Object(G.d)("infinite_stop")?F.a.disableInfiniteScroll():F.a.enableInfiniteScroll();var t=document.querySelector(".a-main"),e=null;window.__reach_config&&(e=window.__reach_config),F.a.add(t,{ads:Object(G.d)("ad_config"),analytics:Object(G.d)("anal_config"),infinite:!1,simplereach:e}),null!==K.a.galleryNavigation&&K.a.galleryNavigation.on("viewchange",_),Object(Y.b)(window,"scroll",Object(Y.R)(O,100)),Object(Y.b)(window,"resize",Object(Y.l)(y,200))}function m(t){Object($.h)(t.target)&&(Q=null)}function b(t){var e=t.target;Object($.h)(e)&&("list"===e.gallery.layoutView?K.a.galleryNavigation.displayListView():K.a.galleryNavigation.displayGridView(),K.a.galleryNavigation.setArticleTitle(e.properties.title),K.a.galleryNavigation.setGalleryCounter(1,e.gallery.imageElements.length),Q=e)}function v(t){K.a.galleryNavigation.setGalleryCounter(t.imageIndex+1)}function _(t){null!==Q&&("grid"===t.view?Q.gallery.displayThumbnailView():Q.gallery.displayListView(),F.a.resize(0))}function y(){tt=window.innerHeight/2}function O(){if(null!==Q){var t=Object(Y.A)();return Q.gallery.bounds.top>t+tt?void K.a.hideGallery():Q.gallery.bounds.bottom<t+tt?void K.a.hideGallery():void K.a.showGallery()}}function S(){F.a.on("imagefocus",Object(Y.l)(w,300)),F.a.on("focus",j),F.a.on("expand",T)}function w(t){I(t.target.parentArticle,t.imageIndex)}function j(t){var e=t.target;e.analytics[et.a.getDimensionByIndex("AD_BLOCKER")]=String(!window.ads_not_blocked),(it||!it&&e.isInfinite)&&(it=!0,k(e))}function T(t){E({eventCategory:"Infinite scroll",eventAction:"Expand gallery",eventLabel:t.target.properties.title})}function E(t){et.a.SendAll(et.a.SEND_HITTYPES.EVENT,t)}function I(t,e){var i=t.analytics,n=et.a.getDimensionByIndex("GALLERY_PHOTO_CREDIT"),s=et.a.getDimensionByIndex("GALLERY_POSITION"),o=et.a.getDimensionByIndex("BASE_URL"),r=t.gallery.imageElements[e],l=r.querySelector(".c-figure").getAttribute("id"),a=r.querySelector(".c-figure__credit");a&&(i[n]=a.innerHTML,a=null),i[s]=String(e+1),et.a.SetAll(i),et.a.SendAll(et.a.SEND_HITTYPES.PAGEVIEW,{page:i[o]+"#"+l,title:t.el.querySelector(".a-header__title").innerHTML}),i=null,r=null}function k(t){et.a.ResetCustomDimensions(),et.a.SetAll(t.analytics),et.a.SendAll(et.a.SEND_HITTYPES.PAGEVIEW)}function A(){W.b.on("render",z),W.b.on("stop",C),F.a.on("add",q),F.a.on("expand",L),W.b.init(),W.b.lazy()}function x(){var t=F.a.focusedIndex,e=F.a.articles.length;if(F.a.resize(t,e),F.a.focusedIndex>-1){var i=F.a.articles[F.a.focusedIndex];i.type===V.a.GALLERY&&i.gallery.imageNavigation.resize()}}function N(t){var e=Object(Y.w)(t.el,".js-c-card-list__item");Object(Y.N)(e,"is-hidden")}function z(t){Object(Y.B)(t.ad.el.parentNode,"js-ad-top-stories")&&N(t.ad),nt()}function C(t){if(!Object(Y.B)(t.ad.el.parentNode,"js-ad-top-stories")){var e=Object(Y.w)(t.ad.el,".ad--article");t.ad.destroy(),e.parentNode&&e.parentNode.removeChild(e),nt()}}function L(t){var e=t.target;W.b.lazy(e.el),F.a.resize(F.a.articles.indexOf(e))}function P(t){var e=t.target;if(null!==e.ads){var i=W.c.createPageImpressionElement(e.ads.ad_unit,e.ads.ad_zone,e.ads.key_values);document.body.appendChild(i),W.b.display(i)}}function q(t){var e=t.article;e.type===V.a.GALLERY?e.isInfinite?W.b.display(D(e.el,!0)):W.b.lazy():t.infinite?(W.b.display(D(e.el)),W.b.lazy(e.el)):W.b.lazy(),t.infinite&&t.article.once("focus",P)}function D(t,e){return e?t.parentNode.previousElementSibling.querySelector(".ad__container"):t.previousElementSibling.querySelector(".ad__container")}function R(){null!==st.a.el&&(st.a.once("remove",M),F.a.on("add",H))}function M(){F.a.off("add",H)}function H(){st.a.incrementCounter()}Object.defineProperty(e,"__esModule",{value:!0});var B=i(18),F=i(8),Y=i(0),V=i(3),W=i(6),U=i(14),X=i(13),G=i(2),Z=null,J=Object(Y.l)(u,200),K=i(15),$=i(7),Q=null,tt=window.innerHeight/2,et=i(11),it=!1,nt=Object(Y.l)(x,300),st=i(25);!function(){B.a.init(),n(),S(),g(),A(),R(),Object(G.c)().ArticleManager=F.a}()},7:function(t,e,i){"use strict";function n(t,e,i){t.on(i,function(t){t.bubbles&&e.emit(i,t)})}function s(){return"SPR"in window}function o(){var t=document.location.protocol+"//d8rk54i4mohrb.cloudfront.net/js/reach.js";return Object(v.H)(t)}function r(t){s()&&SPR.Reach.collect(t)}function l(){s()&&SPR.stop()}function a(t){return s()?(t?r(t):l(),Promise.resolve()):o().then(function(){return t?r(t):l(),Promise.resolve()})}function c(){return Object(v.I)().then(function(){return window.instgrm.Embeds.process(),window.twttr.widgets.load(),window.FB.init({version:"v2.3",xfbml:!0}),window.imgurEmbed.createIframe?window.imgurEmbed.createIframe():window.imgurEmbed.tasks++,window.skyscanner.widgets.load(),Promise.resolve()},function(){console.error("Error",arguments)}).catch(function(){console.error("Error",arguments)})}function h(t){return t.querySelector(".a-header__title").innerText}function u(t){return t.getAttribute("data-article-url")}function f(t){var e=t.getAttribute("data-article-type");return e?(e=e.toUpperCase(),_.a.hasOwnProperty(e)?_.a[e]:_.a.UNKNOWN):_.a.UNKNOWN}function d(t){var e=Object(v.u)(b.a.abbr),i=e+"_",n=t;return t.substr(0,i.length)!==i&&(n=i+n),window[e].Store.get(n)}function p(t,e){var i=Object(v.u)(b.a.abbr),n=i+"_",s=t;return t.substr(0,n.length)!==n&&(s=n+s),window[i].Store.set(s,e)}function g(t){return t.type===_.a.GALLERY||t.type===_.a["SHOW-SUMMARY"]}function m(){var t=null;t="gapi"in window?Promise.resolve():Object(v.H)("https://apis.google.com/js/platform.js"),t.then(function(){gapi.ytsubscribe.go()})}e.a=n,e.c=l,e.b=a,e.k=c,e.d=h,e.f=u,e.e=f,e.g=d,e.j=p,e.h=g,e.i=m;var b=i(12),v=i(0),_=i(3)},8:function(t,e,i){"use strict";function n(t,e){return Object(D.k)("add",t,{article:e,infinite:e.isInfinite})}function s(t){return Object(D.k)("blur",t,{bubbles:!0})}function o(t){return Object(D.k)("focus",t,{bubbles:!0})}function r(t,e){return Object(D.k)("imageblur",t,{bubbles:!0,image:t.imageElements[e],imageIndex:e})}function l(t,e){return Object(D.k)("imagefocus",t,{bubbles:!0,image:t.imageElements[e],imageIndex:e})}function a(t){return Object(D.k)("next",t)}function c(t){return Object(D.k)("previous",t)}function h(t,e){return Object(D.k)("viewchange",t,{bubbles:!0,layoutView:e})}function u(t){return Object(D.k)("expand",t,{bubbles:!0})}function f(t,e){return Object(D.k)("videoselect",t,{bubbles:!0,videoIndex:e})}function d(t,e){return Object(D.k)("videochange",t,{bubbles:!0,videoIndex:e})}function p(t){q.a.call(this,{wildcard:!0}),this.bounds=null,this.el=t,this._init()}function g(t,e){q.a.call(this,{wildcard:!0});var i=e||{};this.focusedImageIndex=-1,this._hooks={imageElementscroll:null,navScroll:null,thumbnailClick:null},this.parentArticle=i.parentArticle||null,this.bounds=null,this._elementScroll=new V.a(window),this._imagePositions=null,this._windowHeightHalf=Number.Infinity,this.el=t,this.imageElements=_(this.el.querySelectorAll(H.c)),this.imageNavigation=null,this._imageNavigationState="default",this.layoutView="list",this._init()}function m(t,e){t.style.position="absolute",t.style.top=e}function b(t){Object(D.N)(t,"is-fixed"),t.style.position="",t.style.top=""}function v(t,e){Object(D.a)(t,"is-fixed"),t.style.position="fixed",t.style.top=e}function _(t){for(var e=t.length,i=new Array(e);e--;)i[e]=t[e];return i}function y(t,e){q.a.call(this,{wildcard:!0});var i=e||{};this.ads=i.ads||null,this.analytics=i.analytics||null,this.bounds=null,this.el=t,this.gallery=i.gallery||null,this.manager=i.manager,this.properties=null,this.simplereach=i.simplereach||null,this.type=Object(B.e)(this.el),this.isInfinite=i.infinite||!1,this._init()}function O(t){q.a.call(this,{wildcard:!0}),this._hooks={resize:null},this._infiniteScroll=null,this.bounds=null,this.el=t,this.selectedIndex=0,this.videoConfigs=[],this._init()}function S(t){for(var e=t.parentNode,i=e.children.length;i--;)if(e.children[i]===t)return i;return-1}function w(){return Object(B.g)("playlist_json")}function j(t,e){for(var i=-1,n=e.length;++i<n;)t.appendChild(e[0])}function T(t){q.a.call(this,{wildcard:!0}),this.el=t,this.playlist=null,this._init()}function E(){q.a.call(this,{wildcard:!0}),this._hooks={resize:null,scroll:null},this._infiniteScroll=null,this._pageHeight=Number.Infinity,this._windowHeight=Number.Infinity,this.articles=[],this.focusedIndex=-1,this._init()}function I(t){return t>=this._pageHeight-K}function k(){var t=A(Object(B.g)("article_referral_uid")),e=A(Object(B.g)("article_exclude_uid")),i=Object(D.T)(Object(B.g)("infinite_url"),{referral_uid:t,exclude_uid:e});return location.origin+i}function A(t){return String(t).replace(/[\W]/gi,"")}function x(){for(var t=Object(D.A)(),e=this.articles.length,i=null,n=-1;++n<e;)if(i=this.articles[n],this.focusedIndex!==n&&!(i.bounds.top>t+this._windowHeight||i.bounds.bottom<t+this._windowHeight)){this._triggerFocusBlur(n);break}}function N(t){throw this.disableInfiniteScroll(),new Error("Failed at getting the next article",t)}function z(t){var e=t.originalRequest.responseText,i=null;try{i=JSON.parse(e)}catch(t){throw this.disableInfiniteScroll(),new Error("Error trying to parse response JSON",t)}if(i.hasOwnProperty("data")){if(i=i.data,!i.hasOwnProperty("template"))return void this.disableInfiniteScroll();i.stop&&this.disableInfiniteScroll();var n=document.createDocumentFragment(),s=Object(D.d)(n);s(i.template),Object(D.E)(n,document.getElementById("infiniteScrollHook"));var o=document.querySelectorAll(".a-main");o=o[o.length-1];var r=null;i.hasOwnProperty("config_ad")&&null!==i.config_ad&&(r=i.config_ad.data);var l=null;i.hasOwnProperty("config_analytics")&&null!==i.config_analytics&&(l=i.config_analytics.data);var a=null;i.hasOwnProperty("config_simplereach")&&null!==i.config_simplereach&&(a=i.config_simplereach.data),this.add(o,{ads:r,analytics:l,infinite:!0,simplereach:a}),i.local_storage&&i.local_storage.forEach(function(t){Object(B.j)(t.key,t.value)}),this.resize(0),n=null,s=null}}function C(t){var e=t.target;if(!e.isInfinite&&tt)return void(tt=!1);tt&&(tt=!1);var i=e.properties.url+location.search,n=window.location.href;if(R.b&&history.replaceState({},e.properties.title,i),document.title=e.properties.title,Object(B.c)(),e.simplereach){var s=Object(D.j)(e.simplereach);s.ref_url=n,Object(B.b)(s)}}var L=i(9),P=i(1),q=i.n(P),D=i(0),R=i(5),M=i(4),H=i(3),B=i(7),F=i(18);p.prototype=Object(D.D)(q.a.prototype,{_init:function(){var t=this.el.querySelector(".g-image-nav__btn--next");t&&Object(D.b)(t,"click",function(){this.emit("next",a(this))}.bind(this)),t=this.el.querySelector(".g-image-nav__btn--previous"),t&&Object(D.b)(t,"click",function(){this.emit("previous",c(this))}.bind(this)),Object(D.N)(this.el,"is-hidden"),this.resize()},constructor:p,disableNextButton:function(){var t=this.el.querySelector(".g-image-nav__btn--next");t&&t.setAttribute("disabled",!0)},disablePreviousButton:function(){var t=this.el.querySelector(".g-image-nav__btn--previous");t&&t.setAttribute("disabled",!0)},enableNextButton:function(){var t=this.el.querySelector(".g-image-nav__btn--next");t&&t.removeAttribute("disabled")},enablePreviousButton:function(){var t=this.el.querySelector(".g-image-nav__btn--previous");t&&t.removeAttribute("disabled")},resize:function(){this.bounds=Object(D.s)(this.el)}});var Y=p,V=i(16);g.prototype=Object(D.D)(q.a.prototype,{constructor:g,_thumbnailClick:function(t){var e=parseInt(t.delegateTarget.getAttribute("data-thumbnail-index"),10),i=this.imageElements[e];this.displayListView(),window.scrollTo(0,Object(D.s)(i).top-60)},_init:function(){F.a.init(),this.el.querySelector(H.k)&&(this.imageNavigation=new Y(this.el.querySelector(H.k)),this.imageNavigation.on("next",function(){this.gotoImage(this.focusedImageIndex+1)}.bind(this)),this.imageNavigation.on("previous",function(){this.gotoImage(this.focusedImageIndex-1)}.bind(this))),this._hooks.thumbnailClick=Object(D.m)(H.d,this._thumbnailClick,this),Object(D.b)(this.el.querySelector(H.f),"click",this._hooks.thumbnailClick),this.resize()},resize:function(){this.bounds=Object(D.s)(this.el),this._imagePositions=this.imageElements.map(D.s),this._windowHeightHalf=window.innerHeight/2,null!==this.imageNavigation&&this.imageNavigation.resize(),this.updateImageScroll(),this.updateNavScroll()},bindNavScrollListener:function(){null!==this.imageNavigation&&null===this._hooks.navScroll&&(this._hooks.navScroll=this.updateNavScroll.bind(this),Object(D.b)(window,"scroll",this._hooks.navScroll))},unbindNavScrollListener:function(){null!==this.imageNavigation&&null!==this._hooks.navScroll&&(Object(D.P)(window,"scroll",this._hooks.navScroll),this._hooks.navScroll=null)},updateNavScroll:function(){if(null!==this.imageNavigation){var t=Object(D.A)(),e=this.bounds.top-60;if(t>=this.bounds.bottom-60-this.imageNavigation.bounds.height){if("absolute"===this._imageNavigationState)return;return this._imageNavigationState="absolute",void m(this.imageNavigation.el,this.bounds.bottom-this.bounds.top-this.imageNavigation.bounds.height+"px")}if(t<e){if("default"===this._imageNavigationState)return;return this._imageNavigationState="default",void b(this.imageNavigation.el)}if(t>=e){if("fixed"===this._imageNavigationState)return;this._imageNavigationState="fixed",v(this.imageNavigation.el,"60px")}}},gotoImage:function(t){var e=t;e<0?e=0:e>this.imageElements.length-1&&(e=this.imageElements.length-1),e!==this.focusedImageIndex&&this._elementScroll.start({x:0,y:this._imagePositions[e].top},300,{offset:{x:0,y:-60},relative:!1,stopOnUserInput:!1})},bindImageScrollListener:function(){null===this._hooks.imageElementscroll&&(this._hooks.imageElementscroll=Object(D.R)(this.updateImageScroll,100,this),Object(D.b)(window,"scroll",this._hooks.imageElementscroll))},unbindImageScrollListener:function(){null!==this._hooks.scroll&&(Object(D.P)(window,"scroll",this._hooks.imageElementscroll),this._hooks.imageElementscroll=null)},updateImageScroll:function(){for(var t=Object(D.A)()+this._windowHeightHalf,e=-1,i=this._imagePositions.length,n=null;++e<i;)if(n=this._imagePositions[e],this.focusedImageIndex!==e&&!(n.top>t||n.bottom<t)){-1!==this.focusedImageIndex&&this.emit("imageblur",r(this,this.focusedImageIndex)),this.focusedImageIndex=e,this.emit("imagefocus",l(this,this.focusedImageIndex)),null!==this.imageNavigation&&(0===this.focusedImageIndex?(this.imageNavigation.enableNextButton(),this.imageNavigation.disablePreviousButton()):this.focusedImageIndex===this.imageElements.length-1?(this.imageNavigation.enablePreviousButton(),this.imageNavigation.disableNextButton()):(this.imageNavigation.enableNextButton(),this.imageNavigation.enablePreviousButton()));break}},displayListView:function(){"list"!==this.layoutView&&(this.layoutView="list",Object(D.a)(this.el.querySelector(H.f),"is-hidden"),Object(D.N)(this.el.querySelector(H.e),"is-hidden"),null!==this.imageNavigation&&Object(D.N)(this.imageNavigation.el,"is-hidden"),this.emit("viewchange",h(this,this.layoutView)))},displayThumbnailView:function(){if("thumbnail"!==this.layoutView){this.layoutView="thumbnail";var t=this.el.querySelector(H.f);Object(D.N)(t,"is-hidden"),Object(D.a)(this.el.querySelector(H.e),"is-hidden"),null!==this.imageNavigation&&Object(D.a)(this.imageNavigation.el,"is-hidden");var e=Object(D.s)(t),i=Object(D.A)();e.top<=i&&window.scrollTo(0,e.top-60),this.emit("viewchange",h(this,this.layoutView))}},toggleView:function(){"list"===this.layoutView?this.displayThumbnailView():this.displayListView()}});var W=g;y.prototype=Object(D.D)(q.a.prototype,{_bindBubblingEvents:function(){null!==this.gallery&&(Object(B.a)(this.gallery,this,"viewchange"),Object(B.a)(this.gallery,this,"imagefocus"),Object(B.a)(this.gallery,this,"imageblur"))},_getArticleProperties:function(){this.properties={title:Object(B.d)(this.el),url:Object(B.f)(this.el)}},_init:function(){this.isInfinite&&Object(B.k)();var t=this.el.querySelector(H.b);null===this.gallery&&t?(this.gallery=new W(t,{parentArticle:this}),this.on("focus",function(){this.gallery.bindImageScrollListener(),this.gallery.bindNavScrollListener(),this.gallery.updateImageScroll(),this.gallery.updateNavScroll()}.bind(this)),this.on("blur",function(){this.gallery.unbindImageScrollListener(),this.gallery.unbindNavScrollListener(),this.gallery.updateImageScroll(),this.gallery.updateNavScroll()}.bind(this))):null!==this.gallery&&(this.gallery.parentArticle=this),this.isInfinite&&null!==this.gallery&&Object(D.c)(this.el.parentNode.querySelector(H.l),"click",this.expand.bind(this)),this._bindBubblingEvents(),this._getArticleProperties()},constructor:y,expand:function(){Object(D.N)(this.el.parentNode,"is-closed"),this.resize(),this.emit("expand",u(this))},resize:function(){this.bounds=Object(D.s)(this.el),null!==this.gallery&&this.gallery.resize()}});var U=y;O.prototype=Object(D.D)(q.a.prototype,{_bindPlayerListeners:function(){var t=Object(D.m)(".js-c-card-list__item",function(t){if(0!==this.videoConfigs.length){t.preventDefault();var e=S(t.delegateTarget);this.select(e)}},this);Object(D.b)(this.el,"click",t)},_init:function(){this._bindPlayerListeners(),this.resize()},_onListLoadError:function(){},_onListLoadSuccess:function(t){var e=t.originalRequest.responseText,i=null;try{i=JSON.parse(e)}catch(t){throw this.disableInfiniteScroll(),new Error("Error trying to parse response JSON",t)}if(i.hasOwnProperty("data")){if(i=i.data,!i.hasOwnProperty("template"))return void this.disableInfiniteScroll();i.stop&&this.disableInfiniteScroll();var n=document.createDocumentFragment();Object(D.d)(n)(i.template),j(this.el.querySelector(".js-c-card-list"),n.children[0].children),i.local_storage&&i.local_storage.forEach(function(t){/playlist_json$/.test(t.key)?this.videoConfigs=this.videoConfigs.concat(t.value):Object(B.j)(t.key,t.value)}.bind(this)),this.resize()}},constructor:O,disableInfiniteScroll:function(){null!==this._infiniteScroll&&(this._infiniteScroll.disable(),this._infiniteScroll.removeAllListeners(),this._infiniteScroll=null,Object(D.P)(window,"resize",this._hooks.resize),this._hooks.resize=null)},enableInfiniteScroll:function(){null===this._infiniteScroll&&(this._infiniteScroll=new M.a({el:this.el.querySelector(".a-video__sidebar__list"),throttle:150,trigger:function(t){return this.el.scrollHeight/2<t},url:function(t){var e=Object(B.g)("playlist_infinite_url");return location.origin+e+"?page="+(t+1)}}),this._infiniteScroll.on("loadError",this._onListLoadError.bind(this)),this._infiniteScroll.on("loadComplete",this._onListLoadSuccess.bind(this)),this._infiniteScroll.enable(),this._hooks.resize=Object(D.l)(this.resize,200,this),Object(D.b)(window,"resize",this._hooks.resize))},loadConfigs:function(){var t=w();t&&(this.videoConfigs=t)},resize:function(){this.bounds=Object(D.s)(this.el)},select:function(t){if(t===this.selectedIndex)return void this.emit("videoselect",f(this,this.selectedIndex));var e=".js-c-card-list__item:nth-child("+(this.selectedIndex+1)+")";this.selectedIndex>-1&&Object(D.N)(this.el.querySelector(e),"is-active"),this.selectedIndex=t,e=".js-c-card-list__item:nth-child("+(this.selectedIndex+1)+")",Object(D.a)(this.el.querySelector(e),"is-active"),this.emit("videochange",d(this,this.selectedIndex))}});var X=O;T.prototype=Object(D.D)(q.a.prototype,{_bubbleEvents:function(){null!==this.playlist&&(Object(B.a)(this.playlist,this,"videoselect"),Object(B.a)(this.playlist,this,"videochange"))},_init:function(){var t=this.el.querySelector(H.j);t&&(this.playlist=new X(t)),this._bubbleEvents(),Object(B.i)()},constructor:T,resize:function(){null!==this.playlist&&this.playlist.resize()}});var G=document.querySelector(H.i),Z=null;G&&(Z=new T(G,{}));var J=Z,K=500;E.prototype=Object(D.D)(q.a.prototype,{_triggerFocusBlur:function(t){var e=null,i=null;-1!==this.focusedIndex&&(e=this.articles[this.focusedIndex],i=s(e),e.emit("blur",i)),this.focusedIndex=t,e=this.articles[t],i=o(e),e.emit("focus",i)},_onVideoChange:function(t){var e=J.playlist.videoConfigs[t.videoIndex];document.querySelector(H.h).innerHTML=e.embed,document.querySelector(H.g).innerHTML=e.content;var i=document.querySelector(".a-main");i.setAttribute("data-article-uid",e.data_uid),i.setAttribute("data-article-url",e.data_url);var n=this.getArticleByUid(e.data_uid),s=-1;n?s=this.articles.indexOf(n):(n=this.add(i,{analytics:e.config_analytics,isInfinite:!0,simplereach:e.config_simplereach}),s=this.articles.length-1),Object(B.i)(),this._triggerFocusBlur(s),this._triggerFocusBlur(s)},_init:function(){Object(D.K)(this.resize.bind(this,0)),this._hooks.scroll=Object(D.R)(x,33,this),Object(D.b)(window,"scroll",this._hooks.scroll),null!==J&&(Object(B.a)(J,this,"videoselect"),Object(B.a)(J,this,"videochange"),J.on("videochange",this._onVideoChange.bind(this))),this.on("focus",C)},_bindArticleBubbles:function(t){Object(B.a)(t,this,"focus"),Object(B.a)(t,this,"blur"),Object(B.a)(t,this,"imagefocus"),Object(B.a)(t,this,"imageblur"),Object(B.a)(t,this,"viewchange"),Object(B.a)(t,this,"expand")},add:function(t,e){var i=Object(D.f)({ads:null,analytics:null,infinite:!1,simplereach:null},Object(D.j)(e),{manager:this}),s=new U(t,i);return this._bindArticleBubbles(s),s.resize(),this.articles.push(s),this.emit("add",n(this,s)),s},constructor:E,disableInfiniteScroll:function(){null!==this._infiniteScroll&&(this._infiniteScroll.disable(),this._infiniteScroll.removeAllListeners(),this._infiniteScroll=null,Object(D.P)(window,"resize",this._hooks.resize),this._hooks.resize=null,Object(D.P)(window,"scroll",this._hooks.scroll),this._hooks.scroll=null)},enableInfiniteScroll:function(){null===this._infiniteScroll&&(this._infiniteScroll=new M.a({el:window,trigger:I.bind(this),url:k}),this._infiniteScroll.on("loadError",N.bind(this)),this._infiniteScroll.on("loadComplete",z.bind(this)),this._infiniteScroll.enable(),this._hooks.resize=Object(D.l)(this.resize,500,this),Object(D.b)(window,"resize",this._hooks.resize))},getArticleByUid:function(t){for(var e=this.articles.length;e--;)if(this.articles[e].uid===t)return this.articles[e];return!1},resize:function(t,e){if(0!==arguments.length){this._pageHeight=document.body.scrollHeight-window.innerHeight,this._windowHeight=window.innerHeight/2;var i=t<0?0:parseInt(t),n=void 0===e?this.articles.length:parseInt(e);if(!(n<1)){this.articles.slice(i,i+n).forEach(function(t){t.resize()})}}}});var $=new E,Q=$,tt=!0;i.d(e,"a",function(){return Q}),i.d(e,!1,function(){return U}),i.d(e,!1,function(){return W}),i.d(e,!1,function(){return Y}),i.d(e,"b",function(){return J}),L.a.init()}},[49]);
//# sourceMappingURL=article.min.js.map